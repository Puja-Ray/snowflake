name: Run schemachange
on: [push]

jobs:
  run-schemachange:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Install schemachange
      run: |
        pip install schemachange
    - name: Run schemachange
      env:
        SNOWFLAKE_ACCOUNT: ce27782.central-india.azure
        SNOWFLAKE_USER: PUJARAY
        SNOWFLAKE_PASSWORD: Puj@@123RAY
        SNOWFLAKE_DATABASE: DEMO_DB
        SNOWFLAKE_WAREHOUSE: COMPUTE_WH
        SNOWFLAKE_ROLE: ACCOUNTADMIN
      run: |
          schemachange -f $GITHUB_WORKSPACE/dbscripts -a $SF_ACCOUNT -u $SF_USERNAME -r $SF_ROLE -w $SF_WAREHOUSE -d $SF_DATABASE -c $SF_DATABASE.SCHEMACHANGE.CHANGE_HISTORY --create-change-history-table
